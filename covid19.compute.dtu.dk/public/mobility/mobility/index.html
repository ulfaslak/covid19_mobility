<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Traveling patterns and mobility Report by Ulf Aslak and Sune Lehmann. Updated: June, 2, 2020 8:10:17
.vis { margin: 0 auto; height: 370px; } .line-baseline { stroke: black; stroke-width: 1.5; fill: none; stroke-dasharray: 10 5; opacity: 0.2; } .line-horizontal { stroke: #bdc3c7; stroke-width: 1; fill: none; stroke-dasharray: 10 5; } .line-crisis { fill: none; stroke: black; stroke-width: 2; stroke-opacity: 0.25; } .line-changeall { fill: none; stroke: black; stroke-width: 1; stroke-opacity: 0."><meta property="og:title" content="Travel and mobility" />
<meta property="og:description" content="Traveling patterns and mobility Report by Ulf Aslak and Sune Lehmann. Updated: June, 2, 2020 8:10:17
.vis { margin: 0 auto; height: 370px; } .line-baseline { stroke: black; stroke-width: 1.5; fill: none; stroke-dasharray: 10 5; opacity: 0.2; } .line-horizontal { stroke: #bdc3c7; stroke-width: 1; fill: none; stroke-dasharray: 10 5; } .line-crisis { fill: none; stroke: black; stroke-width: 2; stroke-opacity: 0.25; } .line-changeall { fill: none; stroke: black; stroke-width: 1; stroke-opacity: 0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://covid19.compute.dtu.dk/mobility/mobility/" />
<meta property="article:modified_time" content="2020-06-02T08:10:17+02:00" />
<title>Travel and mobility | COVID-19 mobility</title>
<link rel="icon" href="/favicon.png" type="image/x-icon">


<link rel="stylesheet" href="/book.min.8b34b0846c7c6544613b2301559d146e1ddebf7ee7068ccc53d2fd0e9b3701b9.css" integrity="sha256-izSwhGx8ZURhOyMBVZ0Ubh3ev37nBozMU9L9Dps3Abk=">


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-167958784-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><img src="/dtu.png" alt="Logo" /><span>COVID-19 mobility</span>
  </a>
</h2>












  <ul>
<li>
<p><strong><a href="/">Main Page</a></strong></p>
</li>
<li>
<p><strong>Posts</strong></p>
<ul>
<li><em>May</em>
<ul>
<li><a href="/posts/going_to_work/">18: Back to work</a></li>
<li><a href="/posts/spread_of_population/">14: Population re-distributed!</a></li>
<li><a href="/posts/change_in_population_sizes/">11: What&rsquo;s happening in my city?</a></li>
<li><a href="/posts/population_landscape/">7: Population landscape</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Visualizations</strong></p>
<ul>
<li><em>Where people are</em>
<ul>
<li><a href="/visualizations/where_people_are_landscape/">Landscape</a></li>
<li><a href="/visualizations/where_people_are_going_out/">Going out</a></li>
<li><a href="/visualizations/where_people_are_change_in_population_size/">Change in population size</a></li>
<li><a href="/visualizations/where_people_are_population_concentration/">Population distribution</a></li>
</ul>
</li>
<li><em>How people move</em>
<ul>
<li><a href="/visualizations/how_people_move_distance_traveled/">Distance traveled</a></li>
<li><a href="/visualizations/how_people_move_staying_home/">Staying home</a></li>
</ul>
<!-- raw HTML omitted -->
</li>
</ul>
</li>
<li>
<p><strong>Data</strong></p>
<ul>
<li><a href="/data/population_density_maps/">Population Density Maps</a></li>
<li><a href="/data/movement_maps/">Movement Maps</a>
<!-- raw HTML omitted --></li>
</ul>
</li>
</ul>










</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Travel and mobility</strong>

  <label for="toc-control">
    
  </label>
</div>


  
 
      </header>

      
      
  <article class="markdown"><h1 id="traveling-patterns-and-mobility"><strong>Traveling patterns and mobility</strong></h1>
<p><span style="font-size:14px"><em>Report by <a href="mailto:ulfaslak@gmail.com">Ulf Aslak</a> and <a href="mailto:sljo@dtu.dk">Sune Lehmann</a>.</em></span> <span style="font-size:14px"><em>Updated: June, 2, 2020 8:10:17</em></span></p>




<style type="text/css">
	.vis {
		margin: 0 auto;
		height: 370px;
	}
	.line-baseline { 
		stroke: black;
		stroke-width: 1.5;
		fill: none;
		stroke-dasharray: 10 5;
		opacity: 0.2;
	}
	.line-horizontal { 
		stroke: #bdc3c7;
		stroke-width: 1;
		fill: none;
		stroke-dasharray: 10 5;
	}
	.line-crisis { 
		fill: none;
		stroke: black;
		stroke-width: 2;
		stroke-opacity: 0.25;
	}
	.line-changeall { 
		fill: none;
		stroke: black;
		stroke-width: 1;
		stroke-opacity: 0.7;
	}
	.line-tooltip {
		stroke: 'black';
		stroke-dasharray: 5 2.5;
		stroke-width: 1.5;
	}
	.line { 
		fill: none;
		stroke: black;
		stroke-width: 2;
		stroke-opacity: 0.25;
	}
	.rect-tooltip {
		fill: white;
		fill-opacity: 0;
		z-index: 1;
	}
	.trendline {
		fill: none; 
		stroke: red;
		stroke-width: 2.5;
	}
	.histEvent {
		stroke: grey;
		stroke-width: 2;
		stroke-opacity: 1;
	}
	.histEventDot {
		fill: grey;
	}
	.map-polygon-movements {
		stroke: white;
		stroke-width: 0.3;
	}
	.map-polygon-movements-circumference {
		stroke: black;
		stroke-width: 1;
	}
	.dot-baseline {
		fill: white;
		stroke: #2c3e50;
		stroke-width: 2;
		opacity: 0;
	}
	.dot {
		fill: black;
		opacity: 0.5;
	}
	.legend-label {
		text-anchor: start;
		font-weight: 300;
		cursor: pointer;
	}
	.right-legend {
		font-size: 12px;
	}
	.tooltip {	
		position: absolute;
		top: 0;
		line-height: 1;
		font-weight: 500;
		padding: 12px;
		background: rgba(0, 0, 0, 0.8);
		color: #fff;
		border-radius: 2px;	
	}
	.toggle {
		-webkit-user-select: none;          
		-moz-user-select: none;  
		-ms-user-select: none;  
		user-select: none;  
	}
	.select-place {
		position: absolute;
		right: 0px;
	}
	.flex {
		display: flex;
	}
	.flex-col {
		flex-direction: column;
	}
	.radio-rect {
		cursor: pointer;
		fill: #636e72;
	}

	.radio-rect.selected {
		fill: #0984e3;
	}

	.radio-text {
		text-anchor: middle;
		stroke: none;
		fill: white;
		font-weight: 600;
		cursor: pointer;
	}

	.radio-text.selected {
		text-anchor: middle;
		stroke: none;
		fill: white;
		font-weight: 600;
	}

@keyframes spinner-line-fade-quick {
  0%, 39%, 100% {
    opacity: 0.25;  
  }
  40% {
    opacity: 1;
  }
}

</style>






<div style="max-height: 0px">
	<svg>
	  <defs>
	    <pattern id="lines" height="10" width="10" patternUnits="userSpaceOnUse" patternTransform="rotate(-45)">
	      <line x1="0" y1="4" x2="10" y2="4" stroke-width="2" stroke="black"/>
	    </pattern>
	    <pattern id="thinlines" height="5" width="5" patternUnits="userSpaceOnUse" patternTransform="rotate(-45)">
	      <line x1="0" y1="2" x2="10" y2="2" stroke-width="0.5" stroke="black"/>
	    </pattern>
	  </defs>
	</svg>
</div>







<script src="/dist/d3.v5.min.js"></script>
<script src="/dist/d3-simple-slider.min.js"></script>
<script src="/dist/chroma.min.js"></script>
<script src="/dist/spin.min.js"></script>


<script src="/scripts/eventDates.js"></script>
<script src="/scripts/timeSeriesFigure.js"></script>
<script src="/scripts/choroplethMap.js"></script>

<script>

	
	

	
	let spinnerOpts = {
		lines: 8, 
		length: 0, 
		width: 8, 
		radius: 18, 
		corners: 10, 
		color: '#313131', 
		fadeColor: 'transparent', 
		speed: 1, 
		rotate: 0, 
		animation: 'spinner-line-fade-quick', 
	};

	
	function adjustBaseline(datum) {
		datumy = d3.range(7).map(() => []);
		datum.forEach((d, i) => {
		    datumy[i%7].push(d[1]);
		});
		datumy = datumy.map(d => d3.mean(d));
		return datum.map((d, i) => [d[0], datumy[i%7]]);
	}

	
	function zip(a, b) {
		return a.map((e, i) => [e, b[i]]);
	}

	function round(val, order) {
		return Math.round(val * order) / order;
	}

	Date.prototype.addDays = function(n) {
	    let date = new Date(this.valueOf());
	    date.setDate(date.getDate() + n);
	    return date;
	}

	function weekavg(y) {
		let y_avg = [];
		y.forEach((v, i) => {
			let i0 = Math.max(0, i-3);
			let i1 = Math.min(y.length-1, i+4);
			y_avg.push(d3.mean(y.slice(i0, i1)));
		});
		return y_avg;
	}

	function insertKSeperators(x) {
	    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
	}

    
    if (sessionStorage.country == undefined) {sessionStorage.country = "Denmark";}
    function createWorld() {
        var countries = []
        d3.json("/data/countries.json").then(function(data){
            countries = data.sort();
            body = document.getElementsByClassName('container flex')[0];
            toc = document.createElement('aside');
            toc.className = "book-toc";
            nav = document.createElement('nav');
            nav.id = "countries";
            ul = document.createElement('ul');
            countries.forEach(function (item,index){
                li = document.createElement('li');
                a = document.createElement('a');
                a.text = item;
                a.style.cursor = "pointer";
                if (item != sessionStorage.country) {
                    a.onclick = function() {
                        sessionStorage.country=item;
                        window.location.reload();
                    };
                } else {
                    a.style.color = "red";
                }   
                li.appendChild(a);
                ul.appendChild(li);
            });
            nav.appendChild(ul);
            toc.appendChild(nav);
            body.appendChild(toc);
        })}
    createWorld();
</script>

<p>Human mobility is a proxy of overall activity within a country. As Denmark reopens, we gain insight to a number of important trends by carefully monitoring the state of mobility:</p>
<ul>
<li>How fast is activity returning to normal levels?</li>
<li>Can we see change points in the data as a result of new policies?</li>
<li>How is mobility between municipalities changing?</li>
<li>How much activity is there inside different regions? Is there any correlation between activity and disease spread?</li>
</ul>
<p>This (continuously updated) report adresses these questions. Data for this report are <em>Movement Maps</em> and were provided by the Facebook&rsquo;s <a href="https://dataforgood.fb.com/">Data for Good</a> initiative; please see the section <em>Data description</em> at the bottom of this page for descriptive details.</p>
<h2 id="analyses"><strong>Analyses</strong></h2>
<p>In the Movement Maps, the country is gridded into small tiles that are around 2.8 kilometers long and wide. Each day, in turn is split into three time intervals: 0–8, 8–16, and 16–24 (GMT). For each active user a line is drawn between the tile in which they spent most time in the last eight-hour time bin and the current eight-hour time bin. Facebook then aggregates these lines giving us the flow of people between tiles.</p>
<h2 id="distance-traveled"><strong>Distance traveled</strong></h2>
<p>By averaging the length of trips between tiles we get an estimate of the average distance traveled each day by users in the dataset. During the lockdown we should expect this quantity to be significantly reduced, primarily because people work from home.</p>



<!DOCTYPE html>
<meta charset="utf-8">


<div class="flex">
	<div class="radio-timeframe" id='radio-displacementFig'></div>
	<div class="select-place" id='select-displacementFig'></div>
</div>
<div class='vis' id='vis-displacement'></div>






<script>

	let spinnerdisplacement = new Spinner(spinnerOpts).spin(document.getElementById('vis-displacement'));

	let instance_displacement;
	d3.json('/data/'+sessionStorage.country+'_total_displacement.json').then(function(data) {
		instance_displacement = new DeviationPlot(data, 'vis-displacement', 'displacementFig');
		spinnerdisplacement.stop();
		instance_displacement.setup();
		instance_displacement.drawLayout();
		instance_displacement.drawData();
	})

</script>

<p>Plotting this data reveals, as expected, a significant reduction in mobility.</p>
<h2 id="staying-near-home"><strong>Staying near home</strong></h2>



<!DOCTYPE html>
<meta charset="utf-8">


<div class="flex">
	<div class="radio-timeframe" id='radio-stationarityFig'></div>
	<div class="select-place" id='select-stationarityFig'></div>
</div>
<div class='vis' id='vis-stationarity'></div>






<script>

	let spinnerstationarity = new Spinner(spinnerOpts).spin(document.getElementById('vis-stationarity'));

	let instance_stationarity;
	d3.json('/data/'+sessionStorage.country+'_total_stationarity.json').then(function(data) {
		spinnerstationarity.stop();
		instance_stationarity = new DeviationPlot(data, 'vis-stationarity', 'stationarityFig');
		instance_stationarity.setup();
		instance_stationarity.drawLayout();
		instance_stationarity.drawData();
	})

</script>

<h2 id="mapping-movements-between-municipalities"><strong>Mapping movements between municipalities</strong></h2>


<!DOCTYPE html>
<meta charset="utf-8">


<div class="flex">
	<div id="slider-movementsFig"></div>
	<div class="radio-timeframe" id='radio-movementsFig'></div>
</div>
<div class="flex flex-col">
	<div class='vis' id='vis-movementsFig'></div>
</div>






<script>

	let spinnermovements = new Spinner(spinnerOpts).spin(document.getElementById('vis-movementsFig'));

	let instance_movements;
	d3.json("/data/"+sessionStorage.country+"_geojson.json").then(function(geoData) {
		d3.json('/data/'+sessionStorage.country+'_movements_between_admin_regions.json').then(function(data) {
			spinnermovements.stop();
			instance_movements = new MovementsMap(data, geoData, 'movementsFig');
			instance_movements.setup();
			instance_movements.drawLayout();
			instance_movements.drawData();
		})
	})

</script>

<h2 id="data-description"><strong>Data description</strong></h2>
<p>Data was made available through Facebook&rsquo;s <a href="https://dataforgood.fb.com/">Data for Good</a> initiative. The earliest data made available starts March 28; at the lowest level it details population counts in geographical tiles up to 3 km by 3 km in size in three timebines each day (0–8, 8–16, and 16–24 GMT). For this report we combine two aggregated datasets: mobility within municipalities tracks movements between tiles, and mobility between municipalities tracks movements between municipalities. The movements measured between tiles are much sparser due to Facebooks privacy preservation preprocessing steps. <strong>For privacy preservation</strong>, data is unavailale in tiles/municipalties where at a given time &lt; 10 people are present. This introduces an important limitation: It significantly reduces the amount of available data, because if for a given movement there is less than 10 active users present in either the source tile or the destination tile (which is likely), the movement is not reported. Therefore, in municipalies with little movement within, almost no data is available. Moreover, it biases <em>Distance traveled</em> (negatively) and <em>Staying near home</em> (positively).</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  </main>

  
</body>

</html>












