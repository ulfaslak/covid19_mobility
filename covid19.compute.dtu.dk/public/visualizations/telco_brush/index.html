<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Movements from telco data Visualization and data analysis by Ulf Aslak and Peter Møllgaard. .vis { margin: 0 auto; height: 370px; } .line-baseline { stroke: black; stroke-width: 1.5; fill: none; stroke-dasharray: 10 5; opacity: 0.2; } .line-crisis { fill: none; stroke: black; stroke-width: 2; stroke-opacity: 0.25; } .line-changeall { fill: none; stroke: black; stroke-width: 1; stroke-opacity: 0.7; } .line-tooltip { stroke: &#39;black&#39;; stroke-dasharray: 5 2.5; stroke-width: 1.5; } .line { fill: none; stroke: black; stroke-width: 2; stroke-opacity: 0."><meta property="og:title" content="" />
<meta property="og:description" content="Movements from telco data Visualization and data analysis by Ulf Aslak and Peter Møllgaard. .vis { margin: 0 auto; height: 370px; } .line-baseline { stroke: black; stroke-width: 1.5; fill: none; stroke-dasharray: 10 5; opacity: 0.2; } .line-crisis { fill: none; stroke: black; stroke-width: 2; stroke-opacity: 0.25; } .line-changeall { fill: none; stroke: black; stroke-width: 1; stroke-opacity: 0.7; } .line-tooltip { stroke: &#39;black&#39;; stroke-dasharray: 5 2.5; stroke-width: 1.5; } .line { fill: none; stroke: black; stroke-width: 2; stroke-opacity: 0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://covid19.compute.dtu.dk/visualizations/telco_brush/" />
<meta property="article:modified_time" content="2020-07-16T09:57:52+02:00" />
<title>Telco Brush | COVID-19 mobility</title>
<link rel="icon" href="/favicon.png" type="image/x-icon">


<link rel="stylesheet" href="/book.min.8a947f30ccbc45289baa778fab553fcbefa728e514331d0228e194e9c7b19e9a.css" integrity="sha256-ipR/MMy8RSibqnePq1U/y&#43;&#43;nKOUUMx0CKOGU6cexnpo=">


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-167958784-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><img src="/dtu.png" alt="Logo" /><span>COVID-19 mobility</span>
  </a>
</h2>












  <ul>
<li>
<p><strong><a href="/">Main Page</a></strong></p>
</li>
<li>
<p><strong>Posts</strong></p>
<ul>
<li><em>July</em>
<ul>
<li><a href="/posts/midsommar/">16 - <em>Sweden</em>:<br>
Midsummer in Sweden</a></li>
</ul>
</li>
<li><em>June</em>
<ul>
<li><a href="/posts/escape_from_covid_island/">29 - <em>Gaming</em>:<br>
Escape from Covid island</a></li>
</ul>
</li>
<li><em>May</em>
<ul>
<li><a href="/posts/going_to_work/">18 - <em>Denmark</em>:<br>
Back to work</a></li>
<li><a href="/posts/spread_of_population/">14 - <em>Denmark</em>:<br>
Population re-distributed!</a></li>
<li><a href="/posts/change_in_population_sizes/">11 - <em>Denmark</em>: <br>
What&rsquo;s happening in my city?</a></li>
<li><a href="/posts/population_landscape/">7 - <em>Denmark</em>: <br>
Population landscape</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Visualizations</strong></p>
<ul>
<li><em>Where people are</em>
<ul>
<li><a href="/visualizations/where_people_are_landscape/">Landscape</a></li>
<li><a href="/visualizations/where_people_are_going_out/">Going out</a></li>
<li><a href="/visualizations/where_people_are_change_in_population_size/">Change in population size</a></li>
<li><a href="/visualizations/where_people_are_population_concentration/">Population distribution</a></li>
</ul>
</li>
<li><em>How people move</em>
<ul>
<li><a href="/visualizations/how_people_move_movements_between_municipalities/"><strong>New</strong> Movements between regions</a></li>
<li><a href="/visualizations/how_people_move_distance_traveled/">Distance traveled</a></li>
<li><a href="/visualizations/how_people_move_staying_home/">Staying home</a></li>
</ul>
<!-- raw HTML omitted -->
</li>
</ul>
</li>
<li>
<p><strong>Data</strong></p>
<ul>
<li><a href="/data-description/population_density_maps/">Population Density Maps</a></li>
<li><a href="/data-description/movement_maps/">Movement Maps</a>
<!-- raw HTML omitted --></li>
</ul>
</li>
</ul>










</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Telco Brush</strong>

  <label for="toc-control">
    
  </label>
</div>


  
 
      </header>

      
      
  <article class="markdown"><h1 id="movements-from-telco-data"><strong>Movements from telco data</strong></h1>
<span style="font-size:14px"><em>Visualization and data analysis by <a href="mailto:ulfaslak@gmail.com">Ulf Aslak</a> and <a href="mailto:peter-em@hotmail.com">Peter Møllgaard</a>.</em></span>




<style type="text/css">
	.vis {
		margin: 0 auto;
		height: 370px;
	}
	.line-baseline { 
		stroke: black;
		stroke-width: 1.5;
		fill: none;
		stroke-dasharray: 10 5;
		opacity: 0.2;
	}
 
	.line-crisis { 
		fill: none;
		stroke: black;
		stroke-width: 2;
		stroke-opacity: 0.25;
	}
	.line-changeall { 
		fill: none;
		stroke: black;
		stroke-width: 1;
		stroke-opacity: 0.7;
	}
	.line-tooltip {
		stroke: 'black';
		stroke-dasharray: 5 2.5;
		stroke-width: 1.5;
	}
	.line { 
		fill: none;
		stroke: black;
		stroke-width: 2;
		stroke-opacity: 0.25;
	}
	.rect-tooltip {
		fill: white;
		fill-opacity: 0;
		z-index: 1;
	}
	.trendline {
		fill: none; 
		stroke: #5897fb;
		stroke-width: 2.5;
	}
	.brushline {
		fill: none; 
		stroke: #000000;
		stroke-width: 1.5;
	}
	.histEvent {
		stroke: grey;
		stroke-width: 2;
		stroke-opacity: 1;
	}
	.histEventDot {
		fill: grey;
	}
	.map-polygon-movements {
		stroke: grey;
		stroke-width: 0.3;
	}
	.map-polygon-movements-circumference {
		stroke: black;
		stroke-width: 1;
	}
	.dot-baseline {
		fill: white;
		stroke: #2c3e50;
		stroke-width: 2;
		opacity: 0;
	}
	.dot {
		fill: black;
		opacity: 0.5;
	}
	.right-legend {
		font-size: 12px;
		-webkit-user-select: none;          
		-moz-user-select: none;  
		-ms-user-select: none;  
		user-select: none;  
	}
	.tooltip {	
		position: absolute;
		top: 0;
		line-height: 1;
		font-weight: 500;
		padding: 12px;
		background: rgba(0, 0, 0, 0.8);
		color: #fff;
		border-radius: 2px;	
	}
	.toggle {
		-webkit-user-select: none;          
		-moz-user-select: none;  
		-ms-user-select: none;  
		user-select: none;  
	}
	.select-place {
		position: absolute;
  		width: 300px;
  		height: 10px;
		right: 0px;
	}
	.flex {
		display: flex;
	}
	.flex-col {
		flex-direction: column;
	}
	.radio-rect {
		cursor: pointer;
		fill: #636e72;
	}

	.radio-rect.selected {
		fill: #0984e3;
	}

	.radio-text {
		text-anchor: middle;
		stroke: none;
		fill: white;
		font-weight: 600;
		cursor: pointer;
	}

	.radio-text.selected {
		text-anchor: middle;
		stroke: none;
		fill: white;
		font-weight: 600;
	}

	@keyframes spinner-line-fade-quick {
	  0%, 39%, 100% {
	    opacity: 0.25;  
	  }
	  40% {
	    opacity: 1;
	  }
	}

</style>






<div style="max-height: 0px">
	<svg>
	  <defs>
	    <pattern id="lines" height="10" width="10" patternUnits="userSpaceOnUse" patternTransform="rotate(-45)">
	      <line x1="0" y1="4" x2="10" y2="4" stroke-width="2" stroke="black"/>
	    </pattern>
	    <pattern id="thinlines" height="5" width="5" patternUnits="userSpaceOnUse" patternTransform="rotate(-45)">
	      <line x1="0" y1="2" x2="10" y2="2" stroke-width="0.5" stroke="black"/>
	    </pattern>
	  </defs>
	</svg>
</div>







<script src="/dist/d3.v5.min.js"></script>
<script src="/dist/d3-simple-slider.min.js"></script>
<script src="/dist/chroma.min.js"></script>
<script src="/dist/spin.min.js"></script>
<script src="/dist/slimselect.min.js"></script>
<link href="/dist/slimselect.min.css" rel="stylesheet"></link>


<script src="/scripts/eventDates.js"></script>
<script src="/scripts/kommunePop.js"></script>
<script src="/scripts/timeSeriesFigure.js"></script>
<script src="/scripts/choroplethMap.js"></script>
<script src="/scripts/choroplethMapBrush.js"></script>

<script>

	
	

	console.log("Greetings! Thanks for visiting. Looking at the code? Tweet at @ulfaslak with questions, bugs, comments, etc.!")

	
	
	

	
	let spinnerOpts = {
		lines: 8, 
		length: 0, 
		width: 8, 
		radius: 18, 
		corners: 10, 
		color: '#313131', 
		fadeColor: 'transparent', 
		speed: 1, 
		rotate: 0, 
		animation: 'spinner-line-fade-quick', 
	};

	
	function adjustBaseline(datum) {
		datumy = d3.range(7).map(() => []);
		datum.forEach((d, i) => {
		    datumy[i%7].push(d[1]);
		});
		datumy = datumy.map(d => d3.mean(d));
		return datum.map((d, i) => [d[0], datumy[i%7]]);
	}

	
	function zip(a, b) {
		return a.map((e, i) => [e, b[i]]);
	}

	function round(val, order) {
		return Math.round(val * order) / order;
	}

	Date.prototype.addDays = function(n) {
	    let date = new Date(this.valueOf());
	    date.setDate(date.getDate() + n);
	    return date;
	}

	function weekavg(y) {
		let y_avg = [];
		y.forEach((v, i) => {
			let i0 = Math.max(0, i-3);
			let i1 = Math.min(y.length-1, i+4);
			y_avg.push(d3.mean(y.slice(i0, i1)));
		});
		return y_avg;
	}

	function insertKSeperators(x) {
	    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
	}

	function idify(str) {
		
		if (str.includes(" "))
			str = str.replace(/ /g, "-");
		if (isInt(str[0]))
			str = "d" + str;
		return str;
	}

	function isInt(str) {
		return !isNaN(str)
	}


</script>

<!-- raw HTML omitted -->
<p>When a person is active on their telecommunications device (like a smartphone) the cell tower is logged. Cell towers have known position, and as such the movements of telecommunication users can be recorded at large scale. The visualization below plots the aggregated movements of ~5.600.000* telecommunications users, through a span of time that covers the 2020 coronavirus lockdown period and more.</p>


<!DOCTYPE html>
<meta charset="utf-8">


<div class="flex">
	<div class='vis' id='vis-movementsTelcoBrushFig'></div>
</div>
<div class="flex">
	<div id="brush-movementsTelcoBrushFig"></div>
</div>






<script>

	let spinnermovements = new Spinner(spinnerOpts).spin(document.getElementById('vis-movementsTelcoBrushFig'));

	let instance_movements;
	d3.json("/data/Denmark_geojson.json").then(function(geoData) {
	    d3.json('/data/telco_map_new.json').then(function(data) {
			spinnermovements.stop();
			instance_movements = new MovementsMapBrush(data, geoData, 'movementsTelcoBrushFig');
			instance_movements.setup();
			instance_movements.drawData();
			instance_movements.drawLayout();
		})
	})

</script>

<blockquote>
<p><strong>This figure is interactive!</strong></p>
<ul>
<li><strong>Hover</strong> the curser over a municipality to display the number of movements from, to and within.</li>
<li><strong>Click</strong> any municipality to see travel between it and other municipalities, then <strong>hover</strong> other municipalities to see the exact quantities.</li>
<li><strong>Drag</strong> the time brush below or change its span to visualize travel in different time periods.</li>
<li><strong>Toggle</strong> color scaling: linear (<em>lin</em>), square root (<em>sqrt</em>), or logarithmic(<em>log</em>).</li>
<li><strong>Toggle</strong> travel normalization: none (<em>no</em>), by local population count (<em>pop</em>), or by municipality area (<em>area</em>).</li>
<li><strong>Press</strong> <code>esc</code> key to unselect.</li>
<li><strong>Scroll</strong> on the map to zoom.</li>
<li><strong>Drag</strong> the curser on the map to pan.</li>
</ul>
</blockquote>
<p>* Data comes from three major mobile phone operators. While ~5.600.000 is roughly 97% of the Danish populations this number does not take into account persons carrying multiple devices with a sim card or even dual sim devices.</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  </main>

  
</body>

</html>












