<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Distance traveled Visualization and data analysis by Ulf Aslak and Peter Møllgaard.  .vis { margin: 0 auto; height: 370px; } .vis1 { margin: 0 auto; height: 500px; } .line-baseline { stroke: black; stroke-width: 1.5; fill: none; stroke-dasharray: 10 5; opacity: 0.2; } .line-crisis { fill: none; stroke: black; stroke-width: 2; stroke-opacity: 0.25; } .line-changeall { fill: none; stroke: black; stroke-width: 1; stroke-opacity: 0.7; } .line-tooltip { stroke: &#39;black&#39;; stroke-dasharray: 5 2."><meta property="og:title" content="" />
<meta property="og:description" content="Distance traveled Visualization and data analysis by Ulf Aslak and Peter Møllgaard.  .vis { margin: 0 auto; height: 370px; } .vis1 { margin: 0 auto; height: 500px; } .line-baseline { stroke: black; stroke-width: 1.5; fill: none; stroke-dasharray: 10 5; opacity: 0.2; } .line-crisis { fill: none; stroke: black; stroke-width: 2; stroke-opacity: 0.25; } .line-changeall { fill: none; stroke: black; stroke-width: 1; stroke-opacity: 0.7; } .line-tooltip { stroke: &#39;black&#39;; stroke-dasharray: 5 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://covid19.compute.dtu.dk/visualizations/how_people_move_distance_traveled/" />
<meta property="article:modified_time" content="2020-07-08T16:03:14+02:00" />
<title>How People Move Distance Traveled | COVID-19 mobility</title>
<link rel="icon" href="/favicon.png" type="image/x-icon">


<link rel="stylesheet" href="/book.min.8a947f30ccbc45289baa778fab553fcbefa728e514331d0228e194e9c7b19e9a.css" integrity="sha256-ipR/MMy8RSibqnePq1U/y&#43;&#43;nKOUUMx0CKOGU6cexnpo=">


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-167958784-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><img src="/dtu.png" alt="Logo" /><span>COVID-19 mobility</span>
  </a>
</h2>












  <ul>
<li>
<p><strong><a href="/">Main Page</a></strong></p>
</li>
<li>
<p><strong>Posts</strong></p>
<ul>
<li><em>August</em>
<ul>
<li><a href="/posts/new_corona_and_travel/">19 - <em>Denmark</em>:<br>
New cases and travel</a></li>
</ul>
</li>
<li><em>July</em>
<ul>
<li><a href="/posts/midsommar/">16 - <em>Sweden</em>:<br>
Midsummer in Sweden</a></li>
</ul>
</li>
<li><em>June</em>
<ul>
<li><a href="/posts/escape_from_covid_island/">29 - <em>Gaming</em>:<br>
Escape from Covid island</a></li>
</ul>
</li>
<li><em>May</em>
<ul>
<li><a href="/posts/going_to_work/">18 - <em>Denmark</em>:<br>
Back to work</a></li>
<li><a href="/posts/spread_of_population/">14 - <em>Denmark</em>:<br>
Population re-distributed!</a></li>
<li><a href="/posts/change_in_population_sizes/">11 - <em>Denmark</em>: <br>
What&rsquo;s happening in my city?</a></li>
<li><a href="/posts/population_landscape/">7 - <em>Denmark</em>: <br>
Population landscape</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Visualizations</strong></p>
<ul>
<li><em>Where people are</em>
<ul>
<li><a href="/visualizations/where_people_are_landscape/">Landscape</a></li>
<li><a href="/visualizations/where_people_are_going_out/">Going out</a></li>
<li><a href="/visualizations/where_people_are_change_in_population_size/">Change in population size</a></li>
<li><a href="/visualizations/where_people_are_population_concentration/">Population distribution</a></li>
</ul>
</li>
<li><em>How people move</em>
<ul>
<li><a href="/visualizations/how_people_move_movements_between_municipalities/">Movements between regions</a></li>
<li><a href="/visualizations/how_people_move_distance_traveled/"class=active>Distance traveled</a></li>
<li><a href="/visualizations/how_people_move_staying_home/">Staying home</a></li>
</ul>
<!-- raw HTML omitted -->
</li>
</ul>
</li>
<li>
<p><strong>Data</strong></p>
<ul>
<li><a href="/data-description/population_density_maps/">Population Density Maps</a></li>
<li><a href="/data-description/movement_maps/">Movement Maps</a>
<!-- raw HTML omitted --></li>
</ul>
</li>
</ul>










</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>How People Move Distance Traveled</strong>

  <label for="toc-control">
    
  </label>
</div>


  
 
      </header>

      
      
  <article class="markdown"><h1 id="distance-traveled"><strong>Distance traveled</strong></h1>
<span style="font-size:14px"><em>Visualization and data analysis by <a href="mailto:ulfaslak@gmail.com">Ulf Aslak</a> and <a href="mailto:peter-em@hotmail.com">Peter Møllgaard</a>.</em></span>
<p>



<style type="text/css">
	.vis {
		margin: 0 auto;
		height: 370px;
	}
	.vis1 {
		margin: 0 auto;
		height: 500px;
	}
	.line-baseline { 
		stroke: black;
		stroke-width: 1.5;
		fill: none;
		stroke-dasharray: 10 5;
		opacity: 0.2;
	}
 
	.line-crisis { 
		fill: none;
		stroke: black;
		stroke-width: 2;
		stroke-opacity: 0.25;
	}
	.line-changeall { 
		fill: none;
		stroke: black;
		stroke-width: 1;
		stroke-opacity: 0.7;
	}
	.line-tooltip {
		stroke: 'black';
		stroke-dasharray: 5 2.5;
		stroke-width: 1.5;
	}
	.line { 
		fill: none;
		stroke: black;
		stroke-width: 2;
		stroke-opacity: 0.25;
	}
	.rect-tooltip {
		fill: white;
		fill-opacity: 0;
		z-index: 1;
	}
	.trendline {
		fill: none; 
		stroke: #5897fb;
		stroke-width: 2.5;
	}
	.brushline {
		fill: none; 
		stroke: #000000;
		stroke-width: 1.5;
	}
	.histEvent {
		stroke: grey;
		stroke-width: 2;
		stroke-opacity: 1;
	}
	.histEventDot {
		fill: grey;
	}
	.map-polygon-movements {
		stroke: grey;
		stroke-width: 0.3;
	}
	.map-polygon-movements-circumference {
		stroke: black;
		stroke-width: 1;
	}
	.dot-baseline {
		fill: white;
		stroke: #2c3e50;
		stroke-width: 2;
		opacity: 0;
	}
	.dot {
		fill: black;
		opacity: 0.5;
	}
	.right-legend {
		font-size: 12px;
		-webkit-user-select: none;          
		-moz-user-select: none;  
		-ms-user-select: none;  
		user-select: none;  
	}
	.tooltip {	
		position: absolute;
		top: 0;
		line-height: 1;
		font-weight: 500;
		padding: 12px;
		background: rgba(0, 0, 0, 0.8);
		color: #fff;
		border-radius: 2px;	
	}
	.toggle {
		-webkit-user-select: none;          
		-moz-user-select: none;  
		-ms-user-select: none;  
		user-select: none;  
	}
	.select-place {
		position: absolute;
  		width: 300px;
  		height: 10px;
		right: 0px;
	}
	.flex {
		display: flex;
	}
	.flex-col {
		flex-direction: column;
	}
	.radio-rect {
		cursor: pointer;
		fill: #636e72;
	}

	.radio-rect.selected {
		fill: #0984e3;
	}

	.radio-text {
		text-anchor: middle;
		stroke: none;
		fill: white;
		font-weight: 600;
		cursor: pointer;
	}

	.radio-text.selected {
		text-anchor: middle;
		stroke: none;
		fill: white;
		font-weight: 600;
	}

	@keyframes spinner-line-fade-quick {
	  0%, 39%, 100% {
	    opacity: 0.25;  
	  }
	  40% {
	    opacity: 1;
	  }
	}

</style>






<div style="max-height: 0px">
	<svg>
	  <defs>
	    <pattern id="lines" height="10" width="10" patternUnits="userSpaceOnUse" patternTransform="rotate(-45)">
	      <line x1="0" y1="4" x2="10" y2="4" stroke-width="2" stroke="black"/>
	    </pattern>
	    <pattern id="thinlines" height="5" width="5" patternUnits="userSpaceOnUse" patternTransform="rotate(-45)">
	      <line x1="0" y1="2" x2="10" y2="2" stroke-width="0.5" stroke="black"/>
	    </pattern>
	  </defs>
	</svg>
</div>







<script src="/dist/d3.v5.min.js"></script>
<script src="/dist/d3-simple-slider.min.js"></script>
<script src="/dist/chroma.min.js"></script>
<script src="/dist/spin.min.js"></script>
<script src="/dist/slimselect.min.js"></script>
<link href="/dist/slimselect.min.css" rel="stylesheet"></link>


<script src="/scripts/eventDates.js"></script>
<script src="/scripts/kommunePop.js"></script>
<script src="/scripts/timeSeriesFigure.js"></script>
<script src="/scripts/choroplethMap.js"></script>
<script src="/scripts/choroplethMapBrush.js"></script>
<script src="/scripts/timeSliderScatterPlot.js"></script>

<script>

	
	

	console.log("Greetings! Thanks for visiting. Looking at the code? Tweet at @ulfaslak with questions, bugs, comments, etc.!")

	
	
	

	
	let spinnerOpts = {
		lines: 8, 
		length: 0, 
		width: 8, 
		radius: 18, 
		corners: 10, 
		color: '#313131', 
		fadeColor: 'transparent', 
		speed: 1, 
		rotate: 0, 
		animation: 'spinner-line-fade-quick', 
	};

	
	function adjustBaseline(datum) {
		datumy = d3.range(7).map(() => []);
		datum.forEach((d, i) => {
		    datumy[i%7].push(d[1]);
		});
		datumy = datumy.map(d => d3.mean(d));
		return datum.map((d, i) => [d[0], datumy[i%7]]);
	}

	
	function zip(a, b) {
		return a.map((e, i) => [e, b[i]]);
	}

	function round(val, order) {
		return Math.round(val * order) / order;
	}

	Date.prototype.addDays = function(n) {
	    let date = new Date(this.valueOf());
	    date.setDate(date.getDate() + n);
	    return date;
	}

	function weekavg(y) {
		let y_avg = [];
		y.forEach((v, i) => {
			let i0 = Math.max(0, i-3);
			let i1 = Math.min(y.length-1, i+4);
			y_avg.push(d3.mean(y.slice(i0, i1)));
		});
		return y_avg;
	}

	function insertKSeperators(x) {
	    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
	}

	function idify(str) {
		
		if (str.includes(" "))
			str = str.replace(/ /g, "-");
		if (isInt(str[0]))
			str = "d" + str;
		return str;
	}

	function isInt(str) {
		return !isNaN(str)
	}


</script>

<script>
    
    if (sessionStorage.country == undefined) {sessionStorage.country = "Denmark";}
    function createWorld() {
        var countries = []
        d3.json("/data/countries.json").then(function(data){
            countries = data.sort();
            body = document.getElementsByClassName('container flex')[0];
            toc = document.createElement('aside');
            toc.className = "book-toc";
            nav = document.createElement('nav');
            nav.id = "countries";
            ul = document.createElement('ul');
            countries.forEach(function (item,index){
                li = document.createElement('li');
                a = document.createElement('a');
                a.text = item;
                a.style.cursor = "pointer";
                if (item != sessionStorage.country) {
                    a.onclick = function() {
                        sessionStorage.country=item;
                        window.location.reload();
                    };
                } else {
                    a.style.color = "red";
                    a.style["font-weight"] = "bold";
                }
                li.appendChild(a);
                ul.appendChild(li);
            });
            nav.appendChild(ul);
            toc.appendChild(nav);
            body.appendChild(toc);
        })}
    createWorld();
</script>
By averaging the length of trips between tiles we get an estimate of the average distance traveled each day by users in the dataset. During the lockdown we should expect this quantity to be significantly reduced, primarily because people work from home.</p>
<p>Note that this is <em>an extremely conservative lower bound</em> on mobility. The shortest distance we can measure is 2.63 km, and we only have information about trips if they start and end in different time windows (eight hours apart), in different places where the user spent large amounts of time. For example, if someone leaves their home in the suburbs during working hours (10–18) to spend the afternoon in the city yet overall spent most of that time window at home (not an unlikely scenario for a shopping trip on the weekend), the entire movement goes unrecorded, and it will appear as if the user stayed in at home the whole time. It is only if the user went to the city—or other place different than where they would spend the afternoon and night—for the majority part of the time window that the trip is recorded.</p>
<p>As a result, <strong>seeing the distance rise even a small amount, is a strong signal that people are going back to work.</strong></p>
<p>It should, at the same time, be understood that this <em>daily distance traveled per capita</em> measure cannot be taken at face value, as it is in reality much higher. The most insightful measure in this plot is therefore the relative deviation from the baseline, a reflection of how the curve is changing compared to the baseline. Toggle <strong>rel</strong><span style="color:white">/</span>abs to see the plot of <em>daily distance traveled per capita</em> relative to the baseline, which measures activity before the lockdown.</p>
<p>Note that there is also a significant portion of municipalities that are not available for inspection. This is because there is not enough data inside these. See &lsquo;<strong>Data</strong> &gt; Movement Maps&rsquo; for notes on data loss due to privacy.</p>



<!DOCTYPE html>
<meta charset="utf-8">


<div class="flex">
	<div class="radio-timeframe" id='radio-displacementFig'></div>
	<div class="select-place" id='select-displacementFig'></div>
</div>
<div class='vis' id='vis-displacement'></div>






<script>

	let spinnerdisplacement = new Spinner(spinnerOpts).spin(document.getElementById('vis-displacement'));

	let instance_displacement;
	d3.json('/data/'+sessionStorage.country+'_total_displacement.json').then(function(data) {
		instance_displacement = new DeviationPlot(data, 'vis-displacement', 'displacementFig');
		spinnerdisplacement.stop();
		instance_displacement.setup();
		instance_displacement.drawLayout();
		instance_displacement.drawData();
	})

</script>

<blockquote>
<p><strong>This figure is interactive!</strong> You can:</p>
<ul>
<li>Change the municipality displayed using the <strong>dropdown menu</strong>.</li>
<li>Toggle whether the y-axis displays the absolute measurements (rel<span style="color:white">/</span><strong>abs</strong>) or the deviation from the baseline (<strong>rel</strong><span style="color:white">/</span>abs).</li>
<li><strong>Hover</strong> the curves to see precise values.</li>
<li><strong>Hover</strong> the marks on the x-axis to see events.</li>
</ul>
</blockquote>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  </main>

  
</body>

</html>












